<!--index.wxml-->
<import src="/compente/season_item/season_item.wxml"></import>
<view class="index">
  <view class="seacher">
    <image src="../../image/seacher.svg" />
    <input type="text" value="{{search_txt}}" bindtap="toSearch" bindinput="getSearch_txt" bindconfirm="searchSubmit"/>
  </view>
  <view class="nav">
    <view class="navItem" >
      <text class="{{active ? 'active' : '' }}" bindtap="navActive" data-index="0" >热门</text>
    </view>
    <view class="navItem" >
      <text class="{{!active ? 'active' : '' }}" bindtap="navActive" data-index="1" >追番</text>
    </view>
  </view>
  <swiper style="height: {{visual?visual-79.2+'px' : 'auto'}}" current="{{activeTab}}" bindchange="bindchange">
    
    <!-- 热门视频页面 -->
    <swiper-item>
      <scroll-view scroll-y="true" class="page-section-spacing" style="height: {{visual?visual-79.2+'px' : 'auto'}}" >
      <view class="video">
        <view class="videoItem" wx:for="{{hotVideo}}" bindtap="videoShow" data-bvid="{{item.bvid}}" data-historyList="{{item}}">
          <image src="{{item.pic}}" />
          <view class="videoTitle">
            <text>{{item.title}}</text>
          </view>
          <view class="rcmd_reason">
            <view class="rcmd_reason-content" wx:if="{{item.rcmd_reason.content}}">
              <text>{{item.rcmd_reason.content}}</text>
            </view>
          </view>
          <view class="owner">
            <image src="../../image/ownerIcon.svg" />
            <text> {{item.owner.name}}</text>
          </view>
          <view class="stat">
            <image src="../../image/view.svg" />
            <text>{{item.stat.view}}</text>
          </view>
        </view>
      </view>
    </scroll-view>
    </swiper-item>

    <!-- 追番页面 -->
    <swiper-item>
      <scroll-view scroll-y="true" class="page-section-spacing" style="height: {{visual?visual-79.2+'px' : 'auto'}}" >
        <view class="toThem">
          <view class="themDate">
            <view class="weekItem"  wx:for="{{week}}">
              <!-- 循环   [周一,,,,周日] -->
              <view class="{{ dayIndex === index ? 'clickActive' : ''}}" >
                <view  wx:if="{{ dayIndex === index}}">
                <text>{{clickWeeks[index]}}</text>
                </view>
                <text wx:else class="{{ index === 3 ? 'dayActive01' : ''}}"  bindtap="dayActive" data-dayIndex="{{index}}" data-week="{{item}}">{{item}}</text>
              </view>
            </view>
          </view>
          <view class="toThemVideo" wx:for="{{8}}" wx:for-item="dayActiveItem" wx:if="{{dayActiveIndex==dayActiveItem}}">
            <view  wx:for="{{toThemData}}" >
              <view class="themVideo" wx:if="{{item.day_of_week==dayActiveIndex}}" >
                <view class="themVideoItem" wx:for="{{item.seasons}}" wx:for-item="seasonsItem" bindtap="cartoonShow" data-playid="{{seasonsItem.season_id}}" data-historyList="{{seasonsItem}}">
                  <image src="{{seasonsItem.cover}}" /> 
                  <text class="seasons.title">\n{{seasonsItem.title}}\n</text>
                  <text class="seasons.pub_index">{{seasonsItem.pub_index}}</text>
                </view>
              </view>
            </view>
          </view>
        </view>

        <!-- 索引 -->
        <view class="indexes">
          <view class="indexesTitle">
            <text>索引</text>
            <text class="more" bindtap="viewMore">查看更多></text>
          </view>
          <view class="indexesCount">
            <view class="indexesItem" bindtap="styleActive" data-styleActiveIndex="{{index}}" wx:for="{{indexesItem}}" >
              <text>{{item.styleName}}</text>
            </view>
          </view>
        </view>

        <!-- 番剧推荐 -->
        <view class="cartoonRecommend">
          <text>番剧推荐</text>
          
            <view class="seasonsList" >
              <view class="seasonsListItem" wx:for="{{seasonsList.list}}" wx:if="{{index >= refreshSeasonIndex && index < refreshSeason}}" bindtap="cartoonShow" data-playid="{{item.season_id}}" data-historyList="{{item}}" >
                <image src="{{item.cover}}" />
                <text wx:if="{{item.badge === '会员抢先' || item.badge === '会员专享'}}" class="badge1">{{item.badge}}</text>
                <text wx:elif="{{item.badge === '独家'}}" class="badge2">{{item.badge}}</text>
                <text wx:else decode='true' class="badgeNull">&nbsp;</text>
                <text class="seasonsListItem-title">\n{{item.title}}\n</text>
                <text class="seasonsListItem-pub_index">{{item.desc}}</text> 
             
              </view>
            </view>

            <view class="refresh">
              <view  bindtap="rotate">
                <image src="../../image/Refresh.png" animation="{{animation}}" />
                <!-- <view class="change"> -->
                  <text>换一换</text>
                <!-- </view> -->
              </view>
            </view>
        </view>
      </scroll-view>
    </swiper-item>
    
  </swiper>
</view>

